# STATE_DATA

## ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡° (Core-based Architecture)

| Core | í•µì‹¬ ì§ˆë¬¸ | ê²€ì¦ ëŒ€ìƒ |
| :--- | :--- | :--- |
| **Core 1** | ê°œì¸ ê±´ê°• ìƒíƒœëŠ” ì˜ˆì¸¡ ê°€ëŠ¥í•œê°€? | **í—¬ìŠ¤ì¼€ì–´ ì‹œê³„ì—´ + ML ì˜ˆì¸¡ ê°€ëŠ¥ì„±** |
| **Core 2** | ì˜ˆì¸¡ë§Œìœ¼ë¡œ ë³´í—˜ ì˜ì‚¬ê²°ì •ì´ ê°€ëŠ¥í•œê°€? | **ì˜ˆì¸¡ ê¸°ë°˜ + ë‹¨ìˆœ ê·œì¹™ ì˜ì‚¬ê²°ì •** |
| **Core 3** | ê·œì¹™ì„ ëŠ˜ë¦¬ë©´ ë¬¸ì œê°€ í•´ê²°ë˜ëŠ”ê°€? | **ê·œì¹™ í™•ì¥ì˜ í•œê³„** |
| **Core 4** | ìƒíƒœ ê¸°ë°˜ ì‹œìŠ¤í…œì€ ì™œ ë‹¤ë¥¸ê°€? | **ë°°í„°ë¦¬ ìƒíƒœ ê´€ë¦¬ êµ¬ì¡° ëŒ€ë¹„** |
| **Core 5** | ë³´í—˜ ì˜ì‚¬ê²°ì •ì˜ êµ¬ì¡°ì  í•œê³„ëŠ” ë¬´ì—‡ì¸ê°€? | **ì‚¬ê±´ ì¤‘ì‹¬ vs ìƒíƒœ ì¤‘ì‹¬ êµ¬ì¡°** |
| **Core 6** | ìƒíƒœë¥¼ ì§ì ‘ ê³„ì¸¡í•˜ë©´ ë‹¬ë¼ì§€ëŠ”ê°€? | **Î¼HSM ìƒíƒœ ê³„ì¸¡ ì‚½ì…** |
| **Core 7** | ìƒíƒœ ê¸°ë°˜ íŒë‹¨ì€ ë” ì•ˆì •ì ì¸ê°€? | **ì˜ì‚¬ê²°ì • ì•ˆì •ì„± ì¬ê²€ì¦** |
| **Core 8** | ì™œ ìƒíƒœëŠ” ê·œì¹™ì„ ì´ê¸°ëŠ”ê°€? | **êµ¬ì¡° ì¬í•´ì„** |
| **Core 8** | ë³´í—˜ì€ ì–´ë–¤ êµ¬ì¡°ë¡œ ì§„í™”í•´ì•¼ í•˜ëŠ”ê°€? | **ì‚¬ê±´ ë³´í—˜ â†’ ìƒíƒœ ê´€ë¦¬ ë³´í—˜** |

â¸»

## Coreë³„ ìƒì„¸ ìˆ˜í–‰ ê³„íš ë° ì‹¤ì œ ì‘ì—… ì •

### ğŸ”µ Core 1 â€” Prediction Feasibility (Healthcare Data + ML â€” Health Risk Is Predictable)

* í•µì‹¬ ëª©í‘œ : í—¬ìŠ¤ì¼€ì–´ í™˜ê²½ì—ì„œ ìˆ˜ì§‘ë˜ëŠ” ê°œì¸ ê±´ê°• ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬,ê°œì¸ì˜ ê±´ê°• ë¦¬ìŠ¤í¬ ìƒíƒœê°€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ëŒ€ìƒì¸ì§€ ì—¬ë¶€ë¥¼ ìµœì†Œ ìˆ˜ì¤€ì—ì„œ ê²€ì¦í•œë‹¤. ì´ë¥¼ í†µí•´ ì´í›„ ë³´í—˜ ì˜ì‚¬ê²°ì • í•œê³„ê°€ ì˜ˆì¸¡ ì‹¤íŒ¨ì¸ì§€, êµ¬ì¡°ì  ë¬¸ì œì¸ì§€ë¥¼ êµ¬ë¶„í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ì‹¬ë°•, í™œë™ëŸ‰, ìˆ˜ë©´, ìŠ¤íŠ¸ë ˆìŠ¤ ì§€í‘œ ë“± ê°œì¸ ë‹¨ìœ„ ì‹œê³„ì—´ ë°ì´í„° êµ¬ì„±í•œë‹¤.
  * ë‹¨ì¼ ì§„ë‹¨ì´ ì•„ë‹Œ ìƒíƒœ ë³€í™” ì¶”ì„¸ë¥¼ ê´€ì¸¡í•  ìˆ˜ ìˆë„ë¡ ë°ì´í„° êµ¬ì¡° ì„¤ê³„í•œë‹¤.
  * ê¸°ë³¸ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸ ì ìš© ë° ë‹¨ê¸° ë³€í™” íŒ¨í„´ ì¬í˜„ ì—¬ë¶€ í™•ì¸í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ê°œì¸ ê±´ê°• ìƒíƒœëŠ” ë¬´ì‘ìœ„ ì‚¬ê±´ì´ ì•„ë‹ˆë¼, ì¼ì • ìˆ˜ì¤€ì—ì„œ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ ë³€ìˆ˜ì„ì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 2 â€” Rule-based Insurance Decision (Prediction-based Insurance Decision with Simple Rules)

* í•µì‹¬ ëª©í‘œ: Core 1ì˜ ì˜ˆì¸¡ ê²°ê³¼ë¥¼ ë³´í—˜ ì˜ì‚¬ê²°ì • ì…ë ¥ìœ¼ë¡œ í™œìš©í•˜ì—¬,ë‹¨ìˆœ ê·œì¹™ ê¸°ë°˜ ë³´í—˜ ì˜ì‚¬ê²°ì • êµ¬ì¡°ì˜ ê°€ëŠ¥ì„±ê³¼ í•œê³„ë¥¼ ê²€ì¦í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ì˜ˆì¸¡ëœ ê±´ê°• ë¦¬ìŠ¤í¬ë¥¼ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
  * ì‚¬ì „ ê´€ë¦¬ ê°œì… ì—¬ë¶€ë¥¼ ë‹¨ìˆœ ê·œì¹™ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„í•œë‹¤.
  * ê°œì… íš¨ê³¼ ë° ë¦¬ìŠ¤í¬ ì•ˆì •í™” ì—¬ë¶€ ê´€ì°°í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ì˜ˆì¸¡ ì •ë³´ëŠ” ì¡´ì¬í•˜ë‚˜, ì˜ì‚¬ê²°ì •ì´ ë‹¨ì¼ ì •ë³´ ì¶•ì— ì˜ì¡´í•˜ë©´ì„œ ë³´í—˜ ë¦¬ìŠ¤í¬ê°€ ì¼ê´€ë˜ê²Œ ì•ˆì •í™”ë˜ì§€ëŠ” ì•ŠìŒì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 3 â€” Rule Extension Experiments (Rule Expansion Does Not Solve Structural Limits)

* í•µì‹¬ ëª©í‘œ : Core 2ì˜ í•œê³„ë¥¼ ê·œì¹™ ë‹¨ìˆœì„± ë¬¸ì œë¡œ ê°€ì •í•˜ê³ , ê·œì¹™ í™•ì¥ì„ í†µí•´ êµ¬ì¡°ì  í•œê³„ê°€ í•´ì†Œë˜ëŠ”ì§€ ê²€ì¦í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ë‹¤ì–‘í•œ ì¡°ê±´ê³¼ ì˜ˆì™¸ë¥¼ í¬í•¨í•œ ê·œì¹™ í™•ì¥ ì‹¤í—˜ ìˆ˜í–‰í•œë‹¤.
  * ê·œì¹™ ë³µì¡ë„ ì¦ê°€ì— ë”°ë¥¸ ì˜ì‚¬ê²°ì • ê²°ê³¼ ë³€í™” ê´€ì°°í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ê·œì¹™ì´ ë³µì¡í•´ì§ˆìˆ˜ë¡ ì˜ì‚¬ê²°ì • ì¼ê´€ì„±ì€ ì˜¤íˆë ¤ ì €í•˜ëœë‹¤.
â†’ ë¬¸ì œì˜ ì›ì¸ì€ ê·œì¹™ ì„¤ê³„ê°€ ì•„ë‹ˆë¼ ì •ë³´ êµ¬ì¡°ì— ìˆìŒì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 4 â€” Contrast Case (Battery-based State Management)

* í•µì‹¬ ëª©í‘œ
ë³´í—˜ ì˜ì‚¬ê²°ì • êµ¬ì¡°ì˜ í•œê³„ë¥¼ í•´ê²°ì±… ì œì‹œê°€ ì•„ë‹Œ, ë¹„êµ ì‚¬ë¡€ë¥¼ í†µí•´ êµ¬ì¡°ì ìœ¼ë¡œ í•´ì„í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ë³´í—˜ ì˜ì‚¬ê²°ì • êµ¬ì¡°ì™€ ë°°í„°ë¦¬ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¡° ëŒ€ë¹„í•œë‹¤.
  * ë°°í„°ë¦¬ ì‹œìŠ¤í…œì—ì„œ SOH, ì—´í™”ìœ¨ ë“± ìƒíƒœ ë³€ìˆ˜ë¥¼ ì§€ì†ì ìœ¼ë¡œ ê³„ì¸¡í•˜ëŠ” êµ¬ì¡° ë¶„ì„í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ë™ì¼í•œ ì˜ˆì¸¡ ì‚¬ê³ ë¥¼ ì ìš©í•˜ë”ë¼ë„, ìƒíƒœ ì •ë³´ ë°€ë„ì˜ ì°¨ì´ê°€ ì œì–´ ê°€ëŠ¥ì„±ì„ êµ¬ì¡°ì ìœ¼ë¡œ ê²°ì •í•¨ì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 5 â€” Structural Implications (Redefining Conditions for Preventive Insurance Decision)

* í•µì‹¬ ëª©í‘œ : ì•ì„  ë¹„êµë¥¼ ë°”íƒ•ìœ¼ë¡œ, ë³´í—˜ ì˜ì‚¬ê²°ì •ì´ ì‚¬ì „ ê°œì…ì— ì‹¤íŒ¨í•˜ëŠ” êµ¬ì¡°ì  ì›ì¸ì„ ì •ë¦¬í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ì‚¬ê±´ ì¤‘ì‹¬ ë³´í—˜ êµ¬ì¡°ì™€ ìƒíƒœ ê¸°ë°˜ ë°°í„°ë¦¬ ê´€ë¦¬ êµ¬ì¡° í†µí•© í•´ì„í•œë‹¤.
  * ìƒíƒœ ëˆ„ì  ê´€ì¸¡ ì—¬ë¶€ì— ë”°ë¥¸ ê°œì… ê°€ëŠ¥ì„± ë¹„êµí•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ì˜ˆì¸¡ ê¸°ë°˜ ì˜ì‚¬ê²°ì • êµ¬ì¡°ì˜ íš¨ê³¼ëŠ” ìƒíƒœ ì •ë³´ì˜ ë°€ë„ì™€ í•´ì„ êµ¬ì¡°ì— ì˜í•´ ê²°ì •ë¨ì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 6 â€” State-based Observability Insertion (Î¼HSM-based Insurance State Monitoring)

* í•µì‹¬ ëª©í‘œ : ë³´í—˜ ì˜ì‚¬ê²°ì • í•œê³„ê°€ ì˜ˆì¸¡ì´ë‚˜ ê·œì¹™ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ìƒíƒœë¥¼ ì§ì ‘ ê³„ì¸¡í•˜ì§€ ëª»í•˜ëŠ” êµ¬ì¡°ì—ì„œ ë¹„ë¡¯ëœ ê²ƒì¸ì§€ ê²€ì¦í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * Î¼HSM(micro Health State Monitor) ê°œë… ì •ì˜í•œë‹¤.
  * ê±´ê°• ë¦¬ìŠ¤í¬ë¥¼ ì‚¬ê±´ í™•ë¥ ì´ ì•„ë‹Œ ì—°ì† ìƒíƒœ ë³€ìˆ˜(HSI, HDR, Recovery Margin)ë¡œ ê³„ì¸¡í•œë‹¤.
  * ê¸°ì¡´ ì˜ˆì¸¡ ê¸°ë°˜ ì…ë ¥ì„ Î¼HSM ìƒíƒœ ë³€ìˆ˜ ê¸°ë°˜ ì…ë ¥ìœ¼ë¡œ ì „í™˜í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ë³´í—˜ ì˜ì‚¬ê²°ì •ì˜ í•µì‹¬ í•œê³„ëŠ” ì˜ˆì¸¡ ì‹¤íŒ¨ê°€ ì•„ë‹ˆë¼, ìƒíƒœ ë¹„ê°€ì‹œì„±ì— ìˆì—ˆìŒì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 7 â€” Re-validation: Decision Stability Test (State-based Decision vs Prediction-based Decision)

* í•µì‹¬ ëª©í‘œ
Î¼HSM ê¸°ë°˜ ìƒíƒœ ê´€ì¸¡ êµ¬ì¡°ê°€ ê¸°ì¡´ ì˜ˆì¸¡ ê¸°ë°˜ ì˜ì‚¬ê²°ì •ì˜ ë¶ˆì•ˆì •ì„±ì„ ì™„í™”í•˜ëŠ”ì§€ ì¬ê²€ì¦í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ì˜ˆì¸¡ ê¸°ë°˜ ì˜ì‚¬ê²°ì • êµ¬ì¡°ì™€ Î¼HSM ê¸°ë°˜ ìƒíƒœ ì˜ì‚¬ê²°ì • êµ¬ì¡° ë¹„êµí•œë‹¤.
  * ë™ì¼ ë°ì´í„°Â·ë™ì¼ ì˜ˆì¸¡ ëª¨ë¸ ì¡°ê±´ì—ì„œ ì…ë ¥ êµ¬ì¡°ë§Œ ë³€ê²½í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ Î¼HSM êµ¬ì¡°ì—ì„œ ê°œì… íƒ€ì´ë° ì¼ê´€ì„± ì¦ê°€, ë¶ˆí•„ìš”í•œ ê°œì… ê°ì†Œ í™•ì¸í•œë‹¤.
â†’ íŒë‹¨ ì•ˆì •ì„±ì€ ê·œì¹™ ìˆ˜ê°€ ì•„ë‹ˆë¼ ìƒíƒœ ì¸ì‹ ì—¬ë¶€ì— ì˜í•´ ê²°ì •ë¨ì„ í™•ì¸í•œë‹¤.

â¸»

### ğŸ”µ Core 8 â€” Structural Reinterpretation (Why Î¼HSM Works Where Rules Failed)

* í•µì‹¬ ëª©í‘œ
ê·œì¹™ í™•ì¥ì´ ì‹¤íŒ¨í•œ êµ¬ì¡°ì  ì´ìœ ë¥¼ ì¬í•´ì„í•œë‹¤.

* ìˆ˜í–‰ ë‚´ìš©
  * ì‚¬ê±´ ì¤‘ì‹¬ íŒë‹¨ê³¼ ìƒíƒœ ì¤‘ì‹¬ íŒë‹¨ êµ¬ì¡° ëŒ€ë¹„í•œë‹¤.
  * ë°°í„°ë¦¬ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ SOH ê°œë…ê³¼ Î¼HSM êµ¬ì¡° ì¬ì—°ê²°í•œë‹¤.

* ê²€ì¦ í¬ì¸íŠ¸
â†’ ë³´í—˜ ì˜ì‚¬ê²°ì •ì˜ ë³¸ì§ˆì  ë¬¸ì œëŠ” ê·œì¹™ ë¶€ì¡±ì´ ì•„ë‹ˆë¼, ì—°ì† ìƒíƒœë¥¼ ê´€ì¸¡í•˜ì§€ ëª»í•œ êµ¬ì¡°ì— ìˆì—ˆìŒì„ êµ¬ì¡°ì ìœ¼ë¡œ ì •ë¦¬í•œë‹¤.

â¸»

### ğŸ”µ Core 9 â€” Final Implication (From Event-driven Insurance to State-managed Insurance)

* í•µì‹¬ ëª©í‘œ: ì „ì²´ Coreë¥¼ í†µí•´ ë„ì¶œëœ êµ¬ì¡°ì  ê²°ë¡ ì„ ìµœì¢… ì •ë¦¬í•œë‹¤.

* ìµœì¢… ê²°ë¡  : ìƒíƒœ ê¸°ë°˜ ê³„ì¸¡Â·ê´€ë¦¬ êµ¬ì¡°ëŠ” ìŠ¤ë§ˆíŠ¸ê·¸ë¦¬ë“œì™€ ë°°í„°ë¦¬ ê´€ë¦¬ ì˜ì—­ë¿ ì•„ë‹ˆë¼, ë³´í—˜ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì—ë„ ë™ì¼í•˜ê²Œ ì ìš© ê°€ëŠ¥í•œ ì‚°ì—… ì¸í”„ë¼ ì„¤ê³„ ì›ë¦¬ì„ì„ í™•ì¸í•˜ì˜€ë‹¤.
Î¼HSMì€ ë³´í—˜ì„ ì‚¬ê±´ ì‚¬í›„ ë³´ìƒ êµ¬ì¡°ì—ì„œ, ìƒíƒœ ì—´í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” ì‚¬ì „ ê°œì… ê¸ˆìœµ êµ¬ì¡°ë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ í•µì‹¬ ê´€ì¸¡ ë‹¨ìœ„ë¡œ ê¸°ëŠ¥í•œë‹¤.

---
## íŒŒì¼ ì •ë¦¬ 

### ğŸ“… 12ì›” 25ì¼: Core 1 â€” Health State Backbone & State Variable ì •ì˜ (12_25_core1main.ipynb)
* í—¬ìŠ¤ì¼€ì–´ ì‹œê³„ì—´ Backbone ë°ì´í„° ë¡œë“œ ë° êµ¬ì¡° í™•ì¸ í›„ health_timeseries_core_backbone.csv íŒŒì¼ì„ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.
* date ì»¬ëŸ¼ì„ datetimeìœ¼ë¡œ ë³€í™˜í•˜ê³  user_id, date ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê³  ì „ì²´ row ìˆ˜, ì‚¬ìš©ì ìˆ˜, ë‚ ì§œ ë²”ìœ„ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê·¸ ë‹¤ìŒ ì»¬ëŸ¼ë³„ ê²°ì¸¡ì¹˜ ê°œìˆ˜ë¥¼ ì ê²€í–ˆìŠµë‹ˆë‹¤.
* (user_id, date) ê¸°ì¤€ ì¤‘ë³µ í–‰ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©ìë³„ ê´€ì¸¡ ì¼ìˆ˜ ë¶„í¬(days per user)ë¥¼ ìš”ì•½í–ˆìŠµë‹ˆë‹¤.
* ì‚¬ìš©ì ìƒ˜í”Œ ì‹œê³„ì—´ ì‹œê°í™” í•˜ì—¬ ìƒíƒœê°€ ì‚¬ê±´ì´ ì•„ë‹˜ì„ í™•ì¸í•˜ì˜€ë‹¤. ì´í›„ì— ìƒ˜í”Œ ì‚¬ìš©ì 3ëª…ì„ ì¶”ì¶œí–ˆìŠµë‹ˆë‹¤.
  * ì‹¬ë°• ìƒíƒœ ì‹œê³„ì—´
  * mean_hr
  * hr_std
  * í™œë™ëŸ‰ ì‹œê³„ì—´
  * steps
  * calories
  * ìˆ˜ë©´ ì‹œê³„ì—´
  * sleep_minutes
* ëª¨ë“  ë³€ìˆ˜ë“¤ì´ ë‹¨ë°œ ì´ë²¤íŠ¸ê°€ ì•„ë‹ˆë¼ ì—°ì†ì  ìƒíƒœ ë³€í™”ì„ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ê³  ìƒíƒœ ë³€ìˆ˜ ì •ì˜ (State Variables)í•˜ì˜€ìŠµë‹ˆë‹¤. 
* ìƒíƒœ ë³€ìˆ˜ë¡œ ë‹¤ìŒ ì»¬ëŸ¼ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  * mean_hr
  * hr_std
  * steps
  * sleep_minutes
* ì‚¬ìš©ì ê¸°ì¤€ Z-score ì •ê·œí™”í•˜ê³  ì‚¬ìš©ìë³„ í‰ê· Â·í‘œì¤€í¸ì°¨ ê¸°ì¤€ìœ¼ë¡œ Z-scoreë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.ë¶„ì‚°ì´ 0ì´ê±°ë‚˜ ê²°ì¸¡ì¸ ê²½ìš° Z-scoreë¥¼ 0ìœ¼ë¡œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.
* ë°©í–¥ì„± ë³´ì •
  * steps_z â†’ ë¶€í•˜ ê°ì†Œ ë°©í–¥ì´ë¯€ë¡œ ë¶€í˜¸ ë°˜ì „
  * sleep_minutes_z â†’ íšŒë³µ ì§€í‘œì´ë¯€ë¡œ ë¶€í˜¸ ë°˜ì „
  * Health State Level ê³„ì‚° (12_25_core1main.ipynb)
  * ì •ê·œí™”ëœ ìƒíƒœ ë³€ìˆ˜ë“¤ì˜ í‰ê· ìœ¼ë¡œ ìƒíƒœ ë ˆë²¨ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
* ê³„ì‚°ì‹
  * health_state_level = (mean_hr_z + hr_std_z + steps_z + sleep_minutes_z) / 4
* ealth State Speed ê³„ì‚° (ì—´í™” ì†ë„) (12_25_core1main.ipynb)
  * WINDOW = 7 ê¸°ì¤€ rolling windowë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  * ê° ì‹œì ì—ì„œ ê³¼ê±° ìƒíƒœ ë ˆë²¨ì˜ ê¸°ìš¸ê¸°(ì„ í˜• íšŒê·€ slope)ë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.
  * ì‚¬ìš©ìë³„ë¡œ ì •ë ¬ í›„ health_state_speed ì»¬ëŸ¼ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
  * ìƒíƒœì˜ â€œìˆ˜ì¤€(Level)â€ê³¼ â€œë³€í™” ì†ë„(Speed)â€ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤. ì´í›„ SOH(ìƒíƒœ ìˆ˜ì¤€) + ì—´í™”ìœ¨ ëŒ€ì‘ ë…¼ë¦¬ ê³ ì •í•˜ì˜€ìŠµë‹ˆë‹¤. 
* ìµœì¢… Health State Index ì •ì˜ (12_25_core1main.ipynb)
  * ìƒíƒœ ìˆ˜ì¤€ê³¼ ì†ë„ë¥¼ ê²°í•©í•œ ë‹¨ì¼ ì§€í‘œë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
* ê³„ì‚°ì‹
  * health_state_index = health_state_level + health_state_speed * WINDOW
* ìƒíƒœ ë¶„í¬ í™•ì¸ (ì‚¬ê±´ ì•„ë‹˜ ì¬ê²€ì¦) (12_25_core1main.ipynb)
  * ìƒ˜í”Œ ì‚¬ìš©ìë³„ health_state_index ë¶„í¬ í†µê³„ë¥¼ ì¶œë ¥í–ˆìŠµë‹ˆë‹¤.
  * ìƒíƒœê°€ ì´ì‚° ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ì—°ì† ë¶„í¬ ìƒíƒœ ë³€ìˆ˜ì„ì„ ì¬í™•ì¸í–ˆìŠµë‹ˆë‹¤.
* Core State CSV ì €ì¥ (12_25_core1main.ipynb)
* ì¶œë ¥ ì»¬ëŸ¼
  * user_id, date
* ì›ì²œ ìƒíƒœ ë³€ìˆ˜
  * health_state_level
  * health_state_speed
  * health_state_index
* ì €ì¥ íŒŒì¼ : ../data_csv/health_timeseries_core_state.csv

â¸»

ğŸ“… 12ì›” 25ì¼: Core 1 â€” ì›ì²œ Fitbit ë°ì´í„° ë³‘í•© (Backbone ìƒì„±)
* ì›ì²œ CSV ì»¬ëŸ¼ êµ¬ì¡° í™•ì¸ (12_25_csvíŒŒì¼merge.ipynb)
  * heartrate_seconds_merged.csv
  * dailyActivity_merged.csv
  * sleepDay_merged.csv
  * ê° íŒŒì¼ì˜ ì»¬ëŸ¼ ëª©ë¡ì„ ì¶œë ¥í•´ êµ¬ì¡°ë¥¼ ì‚¬ì „ ì ê²€í–ˆìŠµë‹ˆë‹¤.
* í™œë™ ë°ì´í„° ì¼ ë‹¨ìœ„ Backbone ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. 
  * dailyActivity_merged.csvì—ì„œ
  * ActivityDate â†’ date
  * TotalSteps â†’ steps
  * Calories â†’ calories
  * ì‚¬ìš©ìâ€“ë‚ ì§œ ê¸°ì¤€ ì¼ ë‹¨ìœ„ activity backboneì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
* ì‹¬ë°• ë°ì´í„° ì¼ ë‹¨ìœ„ ì§‘ê³„í•˜ì˜€ìŠµë‹ˆë‹¤. 
  * heartrate_seconds_merged.csvì—ì„œ ì•„ë˜ë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.
  * Time â†’ date
  * ì‚¬ìš©ìâ€“ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ
  * í‰ê·  ì‹¬ë°•(mean_hr)
  * ì‹¬ë°• í‘œì¤€í¸ì°¨(hr_std)
* ìˆ˜ë©´ ë°ì´í„° ì¼ ë‹¨ìœ„ Backbone ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. 
  * sleepDay_merged.csvì—ì„œ
  * SleepDay â†’ date
  * TotalMinutesAsleep â†’ sleep_minutes
  * ì‚¬ìš©ìâ€“ë‚ ì§œ ê¸°ì¤€ ìˆ˜ë©´ backboneì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  * í—¬ìŠ¤ì¼€ì–´ ì‹œê³„ì—´ Backbone ë³‘í•©í•˜ì˜€ìŠµë‹ˆë‹¤.
* ë³‘í•© ìˆœì„œ
	1.	activity Ã— heart rate (left join)
	2.	ê²°ê³¼ Ã— sleep (left join)
  * ë³‘í•© í‚¤
  * user_id
  * date
* ë³‘í•© í›„ ì‚¬ìš©ì ìˆ˜, ë‚ ì§œ ìˆ˜, ê²°ì¸¡ ìš”ì•½ì„ ì ê²€í–ˆìŠµë‹ˆë‹¤.
* Core Backbone CSV ì €ì¥ (12_25_csvíŒŒì¼merge.ipynb)
  * ì €ì¥ íŒŒì¼ : ../data_csv/health_timeseries_core_backbone.csv

### ğŸ“… 12ì›” 25ì¼: Core 2 â€” Health State Î”ì˜ˆì¸¡ (12_25_prediction.ipynb)
* Core 1 ìƒíƒœ CSV ë¡œë“œ ë° ì •í•©ì„± í™•ì¸í•˜ê³  health_timeseries_core_state.csv íŒŒì¼ì„ ë¡œë“œí–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  date ì»¬ëŸ¼ì„ datetimeìœ¼ë¡œ ë³€í™˜í–ˆìŠµë‹ˆë‹¤.
* (user_id, date) ê¸°ì¤€ìœ¼ë¡œ í‰ê·  ì§‘ê³„ë¥¼ ìˆ˜í–‰í•´ ì¤‘ë³µì„ ì •ë¦¬í•œ í›„ ì‚¬ìš©ìÂ·ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í–ˆìŠµë‹ˆë‹¤.ê·¸ë¦¬ê³  ì „ì²´ row ìˆ˜, ì‚¬ìš©ì ìˆ˜, health_state_index ê²°ì¸¡ ì—¬ë¶€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
* Supervised Dataset êµ¬ì„± (Î”state ì˜ˆì¸¡ ë¬¸ì œ ì •ì˜) (12_25_prediction.ipynb)
  * ì˜ˆì¸¡ ë¬¸ì œë¥¼ ìƒíƒœ ì ˆëŒ€ê°’ì´ ì•„ë‹Œ ìƒíƒœ ë³€í™”ëŸ‰(Î”state) ì˜ˆì¸¡ìœ¼ë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
  * ì…ë ¥(X)
     * ê³¼ê±° LOOKBACK = 14ì¼ì˜ health_state_inde 
  * íƒ€ê¹ƒ(y)
     * t + HORIZON(7) ì‹œì ì˜
health_state_index(t+h) - health_state_index(t)
* ì‚¬ìš©ìë³„ ì‹œê³„ì—´ì„ ìœ ì§€í•œ ìƒíƒœë¡œ sliding windowë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
* ì¶œë ¥
  * X: (N, lookback)
  * y: (N,)
  * meta: user_id, t_date, target_date
* Time-based Train / Validation ë¶„ë¦¬í•˜ì—¬ target_date ê¸°ì¤€ìœ¼ë¡œ ì „ì²´ ìƒ˜í”Œì„ ì‹œê°„ ìˆœ ì •ë ¬í–ˆìŠµë‹ˆë‹¤.
* ì• 80%ë¥¼ train, ë’¤ 20%ë¥¼ validationìœ¼ë¡œ ë¶„ë¦¬í•œ í›„ ì‚¬ìš©ì ì„ì„ì€ í—ˆìš©í•˜ë˜ ë¯¸ë˜ ì •ë³´ ëˆ„ìˆ˜ëŠ” ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤.
* ëª¨ë¸ 1 â€” Linear Regression (Baseline) 
  * LinearRegression ëª¨ë¸ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  * ì…ë ¥: ê³¼ê±° 14ì¼ state ë²¡í„°
  * ì¶œë ¥: 7ì¼ í›„ Î”state
  * í‰ê°€ ì§€í‘œ
     * MAE
     * RMSE
  * train / validation ëª¨ë‘ì—ì„œ ì„±ëŠ¥ì„ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.
     * validation ìƒ˜í”Œ ì¼ë¶€ì— ëŒ€í•´ ì•„ë˜ë¥¼ ì¶œë ¥í•´ sanity checkë¥¼ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.
     * ì‹¤ì œ Î”state
     * ì˜ˆì¸¡ Î”state
     * user_id
* ëª¨ë¸ 2 â€” LSTM (ì–•ì€ êµ¬ì¡°)
  * LSTM ì…ë ¥ í˜•íƒœë¡œ reshape
  * (N, lookback, 1)
  * ëª¨ë¸ êµ¬ì¡°
     * LSTM(16)
     * Dense(1)
     * epochs = 15, batch_size = 32
     * loss: mse
  * Linear ëª¨ë¸ê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ train / validation ì„±ëŠ¥ì„ í‰ê°€í•˜ê³  validation ìƒ˜í”Œ ì¼ë¶€ì— ëŒ€í•´ ì˜ˆì¸¡ ê²°ê³¼ë¥¼ ë¹„êµ ì¶œë ¥í–ˆìŠµë‹ˆë‹¤.
  * Core 2 ìš”ì•½ ì¶œë ¥ 
     * LOOKBACK, HORIZON ì„¤ì •ê°’ì„ ì¶œë ¥í•˜ê³  Linear vs LSTMì„ ì •ëŸ‰ ë¹„êµë§Œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.
     * ëª¨ë¸ ì„ íƒÂ·í™•ì¥ì€ Core 3ì—ì„œ MLflow ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•˜ê¸°ë¡œ ê³ ì •í–ˆìŠµë‹ˆë‹¤.
  * ì˜ˆì¸¡ ê²°ê³¼ í…Œì´ë¸” êµ¬ì„±í•˜í•˜ê³  validation êµ¬ê°„ ê¸°ì¤€ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
  * ê³µí†µ ì»¬ëŸ¼
     * user_id
     * date (target_date)
     * y_true
     * y_pred
     * abs_error
     * run_tag = core2_baseline
  * ëª¨ë¸ êµ¬ë¶„
     * mode_type = linear
     * mode_type = lstm
  * Linear / LSTM ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ DataFrameìœ¼ë¡œ ë³‘í•©í–ˆìŠµë‹ˆë‹¤.
  * MySQL ì˜ˆì¸¡ ê²°ê³¼ ì ì¬
     * sqlalchemy, pymysqlì„ ì‚¬ìš©í•´ DB ì—°ê²°ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
     * DB
     * HEALTH
     * í…Œì´ë¸”
     * prediction_results
     * if_exists="append" ì˜µì…˜ìœ¼ë¡œ ê²°ê³¼ë¥¼ ëˆ„ì  ì €ì¥í–ˆìŠµë‹ˆë‹¤.
  * Core 2 baseline ì˜ˆì¸¡ ê²°ê³¼ ì €ì¥ ì™„ë£Œë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
 
 ### ğŸ“… 12ì›” 25ì¼: Core 3 â€” ê³µí†µ í¬ë§· ì •ê·œí™” Â· supervised ìƒì„± Â· MLflow ì‹¤í—˜ ë² ì´ìŠ¤ êµ¬ì¶•

* ê³µí†µ ì‘ì—… ëª©í‘œ
  * ì¶œì²˜ê°€ ë‹¤ë¥¸ ì—´í™” ë°ì´í„°(NASA / liBattery / Synthetic / EV)ë¥¼ ë™ì¼í•œ ìƒíƒœ ì‹œê³„ì—´ êµ¬ì¡°ë¡œ í†µì¼í–ˆë‹¤.
  * í•™ìŠµ íƒ€ê¹ƒì„ ì ˆëŒ€ ìƒíƒœê°’ì´ ì•„ë‹ˆë¼ Î”state = state(t+horizon) - state(t)ë¡œ ê³ ì •í–ˆë‹¤.
  * ì´í›„ Core 4Â·5ì—ì„œ ì œì–´, ë¶ˆí™•ì‹¤ì„±, ì´ì‹ ê°€ëŠ¥ì„± ë¹„êµê°€ ê°€ëŠ¥í•˜ë„ë¡ ë°ì´í„°ì™€ ì‹¤í—˜ êµ¬ì¡°ë¥¼ ì •ë¦¬í–ˆë‹¤.

* ê³µí†µ ë°ì´í„° í¬ë§·
  * ëª¨ë“  Stage ê²°ê³¼ë¥¼ asset_id, t_index, state_value 3ì»¬ëŸ¼ìœ¼ë¡œ í†µì¼í–ˆë‹¤.

#### 12_25_ê³µí†µí¬ë§·ì •ê·œí™”.ipynb

* Stage A â€” NASA (Canonical Degradation)
  * NASAmetadata.csvë¥¼ ë¡œë“œí•˜ê³  ë©”íƒ€ ì •ë³´ë¡œ íŒë‹¨í•´ battery_id, test_id, uid, filenameë§Œ ë‚¨ê²¼ë‹¤.
  * ì‹¤ì œ ì—´í™” ìƒíƒœëŠ” discharge íŒŒì¼ì˜ Capacity/SOHì—ì„œ ë‚˜ì˜¨ë‹¤ê³  íŒë‹¨ í›„ load_nasa_cell() í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  discharge íŒŒì¼ì„ ë¡œë“œí–ˆë‹¤.
  * Capacityë¥¼ state_valueë¡œ ë§¤í•‘í–ˆì§€ë§Œ ì‹œê°„ ì •ë³´ê°€ ì—†ì–´ t_index = range(len(df))ë¡œ ì •ì˜í–ˆë‹¤.
  * ê²°ê³¼ í¬ë§·ì„ asset_id, t_index, state_valueë¡œ ê³ ì •í–ˆë‹¤.

* Stage B â€” liBattery (Real-world Noise)
  * liBattery_Data_Cleaned.csvë¥¼ ë¡œë“œí–ˆì§€ë§Œ ì‹œê°„ ì»¬ëŸ¼ì´ ì—†ì–´ í–‰ ìˆœì„œë¥¼ ì‹œê°„ìœ¼ë¡œ ê°€ì •í–ˆë‹¤.
  * t_index = groupby(battery_id).cumcount()ë¡œ ìƒì„±í•˜ê³  asset_id=battery_id, state_value=Capacityë¡œ í†µì¼í•´ li_coreë¥¼ ìƒì„±í–ˆë‹¤.

* Stage C-1 â€” Synthetic Degradation
  * battery_degradation.csvë¥¼ ë¡œë“œí•˜ê³  battery_id, time ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í–ˆë‹¤. ì´í›„ rulì„ ì´ë¯¸ ê³„ì‚°ëœ ì—´í™” ê²°ê³¼ë¡œ ë³´ê³  state_value=rulë¡œ ë§¤í•‘í–ˆë‹¤.
  * ë°°í„°ë¦¬ë³„ cumcount()ë¡œ t_indexë¥¼ ìƒì„± í›„ synth_coreë¥¼ ìƒì„±í–ˆë‹¤.

* Stage C-2 â€” EV Synthetic
  * ev_battery_synth.csvë¥¼ ë¡œë“œ í›„ battery_id, charge_cycles ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê³  t_index=charge_cyclesë¡œ ì§ì ‘ ì‚¬ìš©í–ˆë‹¤.
  * state_value=capacity_kWhë¡œ ë§¤í•‘í–ˆìœ¼ë©° ê²°ê³¼ í¬ë§·ì„ asset_id, t_index, state_valueë¡œ í†µì¼í–ˆë‹¤.

â¸»

#### 12_25_stage_check.ipynb

* Stage A â€” nasa_core.csv ìƒì„±
  * NASAmetadata.csvì—ì„œ type == "discharge"ë§Œ ë‚¨ê¸°ê³  Capacity ê²°ì¸¡ í–‰ì„ ì œê±°í–ˆë‹¤.
  * asset_id=str(battery_id), t_index=cumcount(), state_value=Capacityë¡œ nasa_coreë¥¼ ìƒì„±í–ˆë‹¤.
  * ../data_csv/nasa_core.csvë¡œ ì €ì¥í–ˆë‹¤.

* Stage B â€” libattery_core.csv ìƒì„±
  * liBattery_Data_Cleaned.csvë¥¼ battery_id, uid ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í–ˆë‹¤.
  * asset_id=str(battery_id), t_index=cumcount(), state_value=Capacityë¡œ li_coreë¥¼ ìƒì„±í–ˆë‹¤.
  * ../data_csv/libattery_core.csvë¡œ ì €ì¥í–ˆë‹¤.

* Stage C-1 â€” synthetic_degradation_core.csv ìƒì„±
  * battery_degradation.csvë¥¼ battery_id, time ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê³  asset_id=str(battery_id), t_index=cumcount(), state_value=rulë¡œ synth_coreë¥¼ ìƒì„±í–ˆë‹¤.
  * ../data_csv/synthetic_degradation_core.csvë¡œ ì €ì¥í–ˆë‹¤.

* Stage C-2 â€” ev_synth_core.csv ìƒì„±
  * ev_battery_synth.csvë¥¼ battery_id, charge_cycles ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í–ˆë‹¤.
  * asset_id=str(battery_id), t_index=charge_cycles, state_value=capacity_kWhë¡œ ev_coreë¥¼ ìƒì„±í–ˆë‹¤.
  * ../data_csv/ev_synth_core.csvë¡œ ì €ì¥í–ˆë‹¤.

â¸»

#### 12_25_ì»¬ëŸ¼í™•ì¸.ipynb
* CSV ì ê²€ ìœ í‹¸ inspect_csv()ë¥¼ ì •ì˜í•œ í›„ íŒŒì¼ë³„ë¡œ columns, head, null count, row countë¥¼ ì¶œë ¥í–ˆë‹¤.
* ì ê²€ ëŒ€ìƒ íŒŒì¼ì„ ë‹¤ìŒìœ¼ë¡œ ê³ ì •í–ˆë‹¤.
  * NASAmetadata.csv
  * liBattery_Data_Cleaned.csv
  * battery_degradation.csv
  * ev_battery_synth.csv
  * health_timeseries_core_state.csv
* ëª©ì ì„ Stage ì •ê·œí™”ì—ì„œ ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ì»¬ëŸ¼ êµ¬ì¡°ë¥¼ ì‚¬ì „ì— í™•ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ ë‘ì—ˆë‹¤.

â¸»

#### 12_25_ê³µí†µsupervisedìƒì„±ê¸°.ipynb

* MLflow ì„¸íŒ…
  * tracking urië¥¼ sqlite:////Users/mac/Desktop/HW/State_Data/mlflow.dbë¡œ ê³ ì •í–ˆìœ¼ë©° experimentë¥¼ core3_degradation_hierarchicalë¡œ ê³ ì •í–ˆë‹¤.

* ê³µí†µ supervised ìƒì„±ê¸°
  * make_supervised_delta()ë¥¼ ì •ì˜í•˜ê³  asset_idë³„ë¡œ t_index ê¸°ì¤€ ì •ë ¬ í›„ ì‹œí€€ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤.
  * ì…ë ¥ Xë¥¼ lookback ê¸¸ì´ì˜ state_value ì‹œí€€ìŠ¤ë¡œ êµ¬ì„±í–ˆë‹¤.
  * íƒ€ê¹ƒ yë¥¼ state(t+horizon) - state(t) í˜•íƒœì˜ Î”stateë¡œ ì •ì˜í–ˆë‹¤.
  * state_valueë¥¼ to_numeric(..., errors="coerce")ë¡œ ìˆ˜ì¹˜í™”í–ˆë‹¤.
  * ì…ë ¥ ë˜ëŠ” íƒ€ê¹ƒì— NaNì´ í¬í•¨ëœ ìƒ˜í”Œì€ ì œê±°í•˜ê³  Î”stateë¥¼ í˜„ì¬ ì‹œì  tì— ë§¤í•‘ë˜ëŠ” ê°’ìœ¼ë¡œ ë³´ê³  asset_id, t_index(t)ë¥¼ í•¨ê»˜ ë°˜í™˜í–ˆë‹¤.

* í•™ìŠµ ë£¨í‹´
  * train_linear()ë¥¼ ì •ì˜í•œ í›„ LinearRegressionì„ í•™ìŠµí–ˆë‹¤.
  * val ì˜ˆì¸¡ í›„ MAE, RMSE, error_std(residual std)ë¥¼ ê³„ì‚°í–ˆìœ¼ë©° train_lstm()ë¥¼ ì •ì˜í–ˆë‹¤.
  * ì…ë ¥ì„ X[..., None]ë¡œ reshapeí•œ í›„ ëª¨ë¸ì„ LSTM(32) â†’ Dense(1)ë¡œ êµ¬ì„±í–ˆë‹¤.
  * epochs=20, batch_size=32, Adam(lr=0.001), loss=mseë¡œ í•™ìŠµí–ˆë‹¤.
  * val ì˜ˆì¸¡ í›„ MAE, RMSE, error_stdë¥¼ ê³„ì‚°í–ˆë‹¤.

* Stageë³„ ì‹¤í–‰
  * Stage A ì…ë ¥ìœ¼ë¡œ nasa_core.csvë¥¼ ì‚¬ìš©í•˜ê³  Stage B ì…ë ¥ìœ¼ë¡œ libattery_core.csvë¥¼ ì‚¬ìš©í–ˆë‹¤.
  * ê° Stageì—ì„œ 80/20 trainâ€“val splitì„ ì ìš©í–ˆë‹¤.
  * ê° runì— ë‹¤ìŒì„ ë¡œê¹…í–ˆë‹¤.
     * params: stage, dataset, model_type, lookback, horizon
     * metrics: val_MAE, val_RMSE, error_std
  * model artifactë¥¼ MLflowì— ì €ì¥í–ˆë‹¤.

* Stage Cìš© Stress Transform
  * stress_transform(df, gap, noise_sigma)ë¥¼ ì •ì˜í•˜ê³  í„°ë¦¬ë³„ t_index ê¸°ì¤€ìœ¼ë¡œ iloc[::gap] ë‹¤ìš´ìƒ˜í”Œë§ì„ ì ìš©í–ˆë‹¤.
  * state_valueì— ì •ê·œë¶„í¬ ë…¸ì´ì¦ˆ N(0, noise_sigma)ë¥¼ ì¶”ê°€í•œ í›„ ëª©ì ì„ ì •ë³´ ë°€ë„(gap)ì™€ ë…¸ì´ì¦ˆ ìˆ˜ì¤€ ë³€í™”ì— ë”°ë¥¸ ì˜ˆì¸¡ ì•ˆì •ì„± í™•ì¸ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.

â¸»
 
### ğŸ“… 12ì›” 26ì¼: Core 4 â€” MySQL ë¡œê·¸ ìŠ¤í‚¤ë§ˆ êµ¬ì¶• Â· ì ì¬ íŒŒì´í”„ë¼ì¸ Â· Rule-based ì•¡ì…˜ ìƒì„± Â· Core4 ìµœì¢… ì¡°ì¸ ì‚°ì¶œ

* ê³µí†µ ì‘ì—… ëª©í‘œ
  * Core3ì—ì„œ ë§Œë“  state(ìƒíƒœ)ì™€ prediction(ì˜ˆì¸¡)ì„ MySQL ë¡œê·¸ í…Œì´ë¸”ë¡œ ì ì¬í•˜ê³  ì¤‘ë³µ ì…ë ¥/ì¤‘ë³µ í‚¤ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ UNIQUE INDEX + INSERT IGNORE + ì‚¬ì „ dedup êµ¬ì¡°ë¥¼ ë„£ì—ˆë‹¤.
  * ì˜ˆì¸¡ì˜ ë¶ˆí™•ì‹¤ì„±(error_std)ë§Œìœ¼ë¡œ ë³´í—˜ ì•¡ì…˜(approve/watch/deny) ì„ ìƒì„±í•œ í›„ state + prediction + actionì„ ì¡°ì¸í•œ Core4 ìµœì¢… ê²°ê³¼ CSVë¥¼ ë§Œë“¤ì—ˆë‹¤.

#### 12_26_main.ipynb

* DB ì—°ê²° ë° í…Œì´ë¸” ìƒì„±
  * mysql+pymysql://health_user:...@localhost:3306/HEALTHë¡œ ì—”ì§„ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ 3ê°œ í…Œì´ë¸”ì„ ì—†ìœ¼ë©´ ìƒì„±í•˜ë„ë¡ DDLì„ ì‹¤í–‰í–ˆë‹¤.
     * health_state_log
        * asset_id, t_index, state_value, source, created_at êµ¬ì¡°ë¡œ ë§Œë“¤ì—ˆë‹¤.
     * prediction_log
        * asset_id, t_index, y_pred, error_std, model_tag, created_at êµ¬ì¡°ë¡œ ë§Œë“¤ì—ˆë‹¤.
     * insurance_action_log
        * asset_id, t_index, action, reason, created_at êµ¬ì¡°ë¡œ ë§Œë“¤ì—ˆë‹¤.
  * ì¤‘ë³µ ë°©ì§€ìš© UNIQUE INDEXë¥¼ ë§Œë“¤ì—ˆë‹¤.
     * health_state_log(asset_id, t_index, source)
     * prediction_log(asset_id, t_index, model_tag)
     * insurance_action_log(asset_id, t_index, action)
  * ì´ë¯¸ ì¸ë±ìŠ¤ê°€ ìˆëŠ” ê²½ìš°ë¥¼ ê³ ë ¤í•´ ì¸ë±ìŠ¤ ìƒì„± ì—ëŸ¬ëŠ” ë¬´ì‹œí–ˆë‹¤.

* ìƒíƒœ ë¡œê·¸ ì ì¬ (health + battery) â€” ì¤‘ë³µ ì œê±° í¬í•¨í•œ í›„ source == "health"ì¸ ê²½ìš°ë§Œ ë³€í™˜ ë¡œì§ì„ ì ìš©í–ˆë‹¤.
  * user_id â†’ asset_id, health_state_index â†’ state_valueë¡œ ì»¬ëŸ¼ì„ ë°”ê¾¸ê³  dateë¥¼ datetimeìœ¼ë¡œ íŒŒì‹±í–ˆë‹¤.
  * asset_id, date ê¸°ì¤€ ì •ë ¬ í›„ t_index = cumcount()ë¡œ ìƒì„±í–ˆë‹¤.
  * source != "health"(nasa/libattery/synthetic)ëŠ” asset_id,t_index,state_valueê°€ ì´ë¯¸ ìˆë‹¤ê³  ë³´ê³  ê·¸ëŒ€ë¡œ ì‚¬ìš©í–ˆë‹¤.
  * ê³µí†µ ì •ì œ ê·œì¹™ì„ ì ìš©í•˜ê³  state_valueë¥¼ ìˆ˜ì¹˜í™”í•˜ê³  ê²°ì¸¡ì„ ì œê±°, asset_idë¥¼ ë¬¸ìì—´ë¡œ í†µì¼, t_indexë¥¼ ì •ìˆ˜ë¡œ ê°•ì œ ë³€í™˜í•˜ê³  ê²°ì¸¡ì„ ì œê±°, asset_id,t_index,source ê¸°ì¤€ ì¤‘ë³µí–‰ì„ ì œê±°í–ˆë‹¤.
  * insert_health_state_log(df)ë¡œ DBì— ë„£ì€ í›„ ê°™ì€ í‚¤(asset_id,t_index,source)ê°€ ì´ë¯¸ í…Œì´ë¸”ì— ì—¬ëŸ¬ ê°œ ìˆìœ¼ë©´ idê°€ í° ìª½ì„ ì‚­ì œí•˜ë„ë¡ ì‚¬ì „ dedup ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í–ˆë‹¤.
  * ì´í›„ INSERT IGNOREë¡œ ì¤‘ë³µ insertë¥¼ ë§‰ì•˜ë‹¤.
  * ë‹¤ìŒ íŒŒì¼ì„ ì ì¬í–ˆë‹¤.
     * ../data_csv/nasa_core.csv (source="nasa")
     * ../data_csv/libattery_core.csv (source="libattery")
     * ../data_csv/synthetic_degradation_core.csv (source="synthetic")
     * ../data_csv/health_timeseries_core_state.csv (source="health")

* ì˜ˆì¸¡ ë¡œê·¸ ì ì¬ â€” core3_outputì˜ *_pred.csv ì¼ê´„ ì ì¬ (ì¤‘ë³µ ì œê±° í¬í•¨)
  * load_pred_csv(csv_path, model_tag)ë¡œ ì˜ˆì¸¡ CSVë¥¼ ì ì¬ìš© í¬ë§·ìœ¼ë¡œ ì •ì œí•˜ê³  í•„ìˆ˜ ì»¬ëŸ¼ asset_id,t_index,y_pred,error_std ì¡´ì¬ë¥¼ ê°•ì œ ì²´í¬í–ˆë‹¤.
  * t_index,y_pred,error_stdë¥¼ ìˆ˜ì¹˜í™”í•˜ê³  ê²°ì¸¡ì„ ì œê±° í›„ model_tagëŠ” íŒŒì¼ëª…ì—ì„œ _pred.csvë¥¼ ì œê±°í•œ ë¬¸ìì—´ë¡œ ë§Œë“¤ì—ˆë‹¤.
  * asset_id,t_index,model_tag ê¸°ì¤€ ì¤‘ë³µí–‰ì„ ì œê±°í•˜ê³  insert_prediction_log(df)ë¡œ DBì— ë„£ì—ˆë‹¤.
  * ê°™ì€ í‚¤(asset_id,t_index,model_tag) ì¤‘ë³µì´ ìˆìœ¼ë©´ id í° ìª½ì„ ì‚­ì œí•˜ë„ë¡ ì‚¬ì „ dedupì„ ì‹¤í–‰í•˜ê³  ì´í›„ INSERT IGNOREë¡œ ì¤‘ë³µ insertë¥¼ ë§‰ì•˜ë‹¤.
  * pred_dir = "../data_csv/core3_output"ì—ì„œ _pred.csvë¥¼ ì „ë¶€ ì°¾ì•„ ë°˜ë³µ ì ì¬í–ˆë‹¤.

* Rule-based action ìƒì„± â€” prediction_log ê¸°ë°˜
  * ë³´í—˜ ì˜ì‚¬ê²°ì • ê·œì¹™ decide_insurance_action(error_std)ë¥¼ ì •ì˜í•˜ê³  error_std < 0.3ì´ë©´ approve / low uncertaintyë¡œ ê²°ì •í–ˆë‹¤.
  * 0.3 â‰¤ error_std < 0.7ì´ë©´ watch / medium uncertaintyë¡œ ê²°ì •í•œ í›„ error_std â‰¥ 0.7ì´ë©´ deny / high uncertaintyë¡œ ê²°ì •í–ˆë‹¤.
  * prediction_log ì „ì²´ì—ì„œ asset_id,t_index,error_stdë¥¼ ì½ì–´ì˜¤ê³  ê° rowì— ëŒ€í•´ ìœ„ ê·œì¹™ìœ¼ë¡œ action, reasonì„ ë§Œë“¤ì—ˆë‹¤.
  * asset_id,t_index,action ê¸°ì¤€ ì¤‘ë³µí–‰ì„ ì œê±°í–ˆë‹¤.

*  action_log ì ì¬ + ìƒ˜í”Œ JOIN ì¶œë ¥
  * insert_action_log(df)ë¡œ insurance_action_logì— ë„£ì—ˆê³  ê°™ì€ í‚¤(asset_id,t_index,action) ì¤‘ë³µì´ ìˆìœ¼ë©´ id í° ìª½ì„ ì‚­ì œí•˜ë„ë¡ ì‚¬ì „ dedupì„ ì‹¤í–‰í–ˆë‹¤.
  * ì´í›„ INSERT IGNOREë¡œ ì¤‘ë³µ insertë¥¼ ë§‰ì•˜ìœ¼ë©° health_state_log + prediction_log + insurance_action_logë¥¼ asset_id,t_indexë¡œ ì¡°ì¸í•´ 20í–‰ì„ ì¶œë ¥í–ˆë‹¤.

* Core4 ìµœì¢… ì‚°ì¶œë¬¼ CSV ì €ì¥ (Core5 ì…ë ¥)
  * ../core4_output í´ë”ë¥¼ ìƒì„±í–ˆë‹¤.
  * ë‹¤ìŒ ì¡°ì¸ ê²°ê³¼ë¥¼ ì „ì²´ ì¶”ì¶œí•´ df_core4ë¡œ ë§Œë“¤ì—ˆë‹¤.
     * health_state_log(h)
     * prediction_log(p)
     * insurance_action_log(a)
  * join keyëŠ” ëª¨ë‘ asset_id,t_indexë¡œ ê³ ì •í–ˆë‹¤.
  * df_core4ë¥¼ ../core4_output/core4_state_prediction_action_log.csvë¡œ ì €ì¥í•œ í›„ í™•ì¸ìš©ìœ¼ë¡œ ìƒìœ„ 20í–‰ì„ ì¶œë ¥í–ˆë‹¤.

â¸»

#### 12_26_Mysql.ipynb

* ëª©ì  ë° ì—­í• 
  * 12_26_main.ipynbë³´ë‹¤ ë‹¨ìˆœí•œ í˜•íƒœë¡œ MySQL ì ì¬ì™€ ì•¡ì…˜ ìƒì„±ì„ ë¹ ë¥´ê²Œ ì¬í˜„í•œ ì‹¤í–‰ë³¸ì´ì—ˆë‹¤.

* health_state_log ì ì¬
  * insert_state_log(csv_path, source)ë¥¼ ì •ì˜í•œ í›„ source == "health"ì¸ ê²½ìš°ë§Œ ì»¬ëŸ¼ ë§¤í•‘ê³¼ t_index=cumcount() ìƒì„±ì„ ìˆ˜í–‰í–ˆë‹¤.
  * ë‚˜ë¨¸ì§€ nasa/libattery/syntheticì€ ê¸°ì¡´ asset_id,t_index,state_valueê°€ ìˆë‹¤ê³  ë³´ê³  ê·¸ëŒ€ë¡œ ì ì¬í•˜ê³  to_sql(if_exists="append")ë¡œ health_state_logì— ì ì¬í–ˆë‹¤.

* prediction_log ì ì¬
  * insert_prediction_log(csv_path, model_tag)ë¥¼ ì •ì˜í•œ í›„ ì˜ˆì¸¡ CSVì—ì„œ asset_id,t_index,y_pred,error_stdë§Œ ë‚¨ê²¼ë‹¤.
  * model_tagë¥¼ ì¶”ê°€í•´ prediction_logì— append ì ì¬ í›„ ì˜ˆì‹œëŠ” A/B ì¼ë¶€ íŒŒì¼ë§Œ ì§ì ‘ ì§€ì •í•´ ì ì¬í–ˆë‹¤.

* ë³´í—˜ ì˜ì‚¬ê²°ì • ê·œì¹™ ë° action_log ì ì¬
  * decide_insurance_action(error_std) ê·œì¹™ì„ ë™ì¼í•˜ê²Œ ì •ì˜í•˜ê³  insert_action_log_from_prediction(csv_path)ë¡œ ì˜ˆì¸¡ CSVë¥¼ ì½ì–´ ì•¡ì…˜ ë ˆì½”ë“œë¥¼ ìƒì„±í–ˆë‹¤.
  * ìƒì„±í•œ ì•¡ì…˜ ë ˆì½”ë“œë¥¼ insurance_action_logì— append ì ì¬í–ˆë‹¤.

â¸»

#### 12_26_mysqlerror.ipynb

* ì—­í• 
  * ì´ë¯¸ ì ì¬ëœ í…Œì´ë¸”ì—ì„œ ì¤‘ë³µì´ ìƒê¸´ ìƒíƒœë¥¼ ì •ë¦¬í•˜ê¸° ìœ„í•´ ìƒì„±í•˜ì˜€ë‹¤. 

* health_state_log ì¤‘ë³µ ì •ë¦¬
  * SELECT * FROM health_state_logë¡œ ì „ì²´ë¥¼ ì½ì—ˆë‹¤.
  * id ê¸°ì¤€ ì •ë ¬ í›„ asset_id,t_index,source ê¸°ì¤€ìœ¼ë¡œ ì²« í–‰ë§Œ ë‚¨ê¸°ê³  ì¤‘ë³µì„ ì œê±°í–ˆë‹¤.
  * TRUNCATE TABLE health_state_logë¡œ í…Œì´ë¸”ì„ ë¹„ìš´ í›„ dedupëœ ë°ì´í„°ë¥¼ ë‹¤ì‹œ to_sql(append)ë¡œ ì ì¬í–ˆë‹¤.
  * ì •ë¦¬ ì „/í›„ row ìˆ˜ë¥¼ ì¶œë ¥í–ˆë‹¤.

* prediction_log ì¤‘ë³µ ì •ë¦¬
  * ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ asset_id,t_index,model_tag ê¸°ì¤€ dedupì„ ìˆ˜í–‰í•˜ê³  TRUNCATE â†’ ì¬ì ì¬ ìˆœì„œë¡œ ì •ë¦¬í–ˆë‹¤.

* insurance_action_log ì¤‘ë³µ ì •ë¦¬
  * ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ asset_id,t_index,action ê¸°ì¤€ dedupì„ ìˆ˜í–‰í•˜ê³  TRUNCATE â†’ ì¬ì ì¬ ìˆœì„œë¡œ ì •ë¦¬í–ˆë‹¤.

â¸»

### ğŸ“… 12ì›” 26ì¼: Core 5 â€” ìƒíƒœ ê¸°ë°˜ ë³´í—˜ ê°œì… ê·œì¹™ ì‹¤í—˜ ë° ì•ˆì •í™” íš¨ê³¼ ê²€ì¦
* ê³µí†µ ì‘ì—… ëª©í‘œ
  * ê±´ê°• ìƒíƒœ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœ ë³€í™”ìœ¨(ì—´í™”ìœ¨)ì„ ì •ì˜í–ˆë‹¤.
  * ì™¸ë¶€ ìœ„í—˜ ìš”ì¸(risk group)ì„ ê²°í•©í•´ rule-based ê°œì… ê·œì¹™ì„ ì„¤ê³„í•˜ê³  ê°œì… ì´í›„ ìƒíƒœê°€ ì‹¤ì œë¡œ ì•ˆì •í™”ë˜ì—ˆëŠ”ì§€ë¥¼ ì‹œê°„ ì§€ì—° ê¸°ì¤€ìœ¼ë¡œ ê²€ì¦í–ˆë‹¤.
  * Core5 ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•  ì˜ì‚¬ê²°ì • ë¡œê·¸(core5_decision_log.csv)ë¥¼ ìƒì„±í–ˆë‹¤.

#### 12_26_coremain.ipynb
* ê±´ê°• ìƒíƒœ ë°ì´í„° ë¡œë“œ ë° ì •ê·œí™”
  * health_timeseries_core_state.csvë¥¼ ë¡œë“œí•œ í›„ user_id â†’ asset_id, health_state_index â†’ state_valueë¡œ ì»¬ëŸ¼ì„ ì •ê·œí™”í–ˆë‹¤.
  * asset_id, date ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê³  assetë³„ ëˆ„ì  ìˆœì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ t_index = cumcount()ë¥¼ ìƒì„±í–ˆë‹¤.

* ìƒíƒœ ë³€í™”ëŸ‰ ë° ì—´í™”ìœ¨(degradation_rate) ê³„ì‚°
  * assetë³„ state_value ì°¨ë¶„ìœ¼ë¡œ delta_stateë¥¼ ê³„ì‚°í•˜ê³  delta_stateì— ëŒ€í•´ 7ì¼ ì´ë™í‰ê· (window=7, min_periods=3)ì„ ì ìš©í•´ degradation_rateë¥¼ ì •ì˜í–ˆë‹¤.
  * ì´ëŠ” ë‹¨ì¼ ì‹œì  ë³€í™”ê°€ ì•„ë‹Œ ì¶”ì„¸ ê¸°ë°˜ ìƒíƒœ ì•…í™” ì†ë„ë¥¼ ì˜ë¯¸í•˜ë„ë¡ ì„¤ê³„í–ˆë‹¤.

* ì™¸ë¶€ ìœ„í—˜ë„(risk_group) êµ¬ì„±
  * diabetes_dataset.csvë¥¼ ë¡œë“œí•˜ê³  Glucose, BMI, Age, BloodPressureì˜ í‰ê· ìœ¼ë¡œ risk_scoreë¥¼ ê³„ì‚°í–ˆë‹¤.
  * risk_scoreë¥¼ 3ë¶„ìœ„ë¡œ ë‚˜ëˆ  low / mid / high risk groupì„ ìƒì„±í•˜ì˜€ìœ¼ë©° health ë°ì´í„°ì˜ asset ìˆ˜ì— ë§ì¶° risk groupì„ ëœë¤ ìƒ˜í”Œë§í•´ ë§¤í•‘í–ˆë‹¤.
  * ì´ëŠ” ì‹¤ì œ í™˜ì ë§¤ì¹­ì´ ì•„ë‹Œ êµ¬ì¡° ì‹¤í—˜ìš© ìœ„í—˜ë„ ì£¼ì…ì´ì—ˆë‹¤.

* 1ì°¨ ê°œì… ì—¬ë¶€(intervention_flag) ê·œì¹™ ì •ì˜
  * ë‹¤ìŒ rule-based ê°œì… ê·œì¹™ì„ ì •ì˜í–ˆë‹¤.
     * risk_group == high ì´ê³  degradation_rate < -0.05 â†’ ê°œì…
     * risk_group == mid ì´ê³  degradation_rate < -0.10 â†’ ê°œì…
  * ê·¸ ì™¸ëŠ” ë¯¸ê°œì…
  * row ë‹¨ìœ„ë¡œ ê·œì¹™ì„ ì ìš©í•´ intervention_flag (0/1)ë¥¼ ìƒì„±í–ˆë‹¤.

* ê°œì… ì´í›„ ì•ˆì •í™”(stabilized) íŒë‹¨
  * compute_stabilization(df, window=7) í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  í˜„ì¬ ì‹œì  ëŒ€ë¹„ window ì´í›„ì˜ state_valueë¥¼ post_stateë¡œ ì •ì˜í–ˆë‹¤.
  * post_state - state_value > 0ì´ë©´ ìƒíƒœê°€ ì•ˆì •í™”ëœ ê²ƒìœ¼ë¡œ íŒë‹¨í•˜ê³  ê¸°ë³¸ window=7 ê¸°ì¤€ìœ¼ë¡œ ì•ˆì •í™”ìœ¨ì„ ê³„ì‚°í–ˆë‹¤.
  * intervention_flagë³„ ì•ˆì •í™” ë¹„ìœ¨ì„ ë¹„êµí–ˆë‹¤.

* ê°œì… ê°•ë„ë³„ ê·œì¹™ ì¬ì •ì˜ ì‹¤í—˜
  * ê°œì… ê°•ë„ë¥¼ "strong" / "weak" / "none"ìœ¼ë¡œ í™•ì¥í–ˆë‹¤.
     * high + ê°•í•œ ì—´í™” â†’ strong
     * high/mid + ì™„ë§Œí•œ ì—´í™” â†’ weak
  * ê·¸ ì™¸ â†’ none
  * ë™ì¼í•œ ì•ˆì •í™” ì§€í‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°œì… ê°•ë„ë³„ íš¨ê³¼ë¥¼ ë¹„êµí–ˆë‹¤.

* ì‹œê°„ ì§€ì—°(window) íš¨ê³¼ ë¶„ì„
  * ì•ˆì •í™” íŒë‹¨ windowë¥¼ [3, 7, 14]ë¡œ ë°”ê¿”ê°€ë©° ë°˜ë³µ ì‹¤í—˜í•œ í›„ window ë³€í™”ì— ë”°ë¼ ê°œì… íš¨ê³¼ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ì¶œë ¥ìœ¼ë¡œ í™•ì¸í–ˆë‹¤.
  * ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° ì§€ì—° íš¨ê³¼ë¥¼ ë¹„êµí•˜ê¸° ìœ„í•œ êµ¬ì¡°ì˜€ë‹¤.

* ê°œì… íš¨ìœ¨(Efficiency) ì§€í‘œ ì •ì˜
  * stabilize_rate = stabilized.mean()
  * count = í‘œë³¸ ìˆ˜
  * efficiency = stabilize_rate / countë¡œ ì •ì˜í–ˆë‹¤.
  * ì´ëŠ” ë‹¨ìˆœ ì„±ê³µë¥ ì´ ì•„ë‹ˆë¼ ê°œì… ë¹ˆë„ ëŒ€ë¹„ íš¨ê³¼ ë°€ë„ë¥¼ ë³´ë ¤ëŠ” ëª©ì ì´ì—ˆë‹¤.

* False Intervention(ê°œì… ì‹¤íŒ¨) ë¶„ì„
  * intervention_flag == 1 ì´ì§€ë§Œ stabilized == Falseì¸ ìƒ˜í”Œì„ ì¶”ì¶œ í›„ í•´ë‹¹ ìƒ˜í”Œì˜ risk_group, degradation_rate ë¶„í¬ë¥¼ ê¸°ìˆ í†µê³„ë¡œ í™•ì¸í–ˆë‹¤.
  * ì´ëŠ” ê³¼ì‰ ê°œì… / ì˜ëª»ëœ ê°œì… ì¡°ê±´ íƒìƒ‰ì„ ìœ„í•œ ë¶„ì„ì´ì—ˆë‹¤.

* Core5 ì˜ì‚¬ê²°ì • ë¡œê·¸ ìƒì„±
  * ë‹¤ìŒ ì»¬ëŸ¼ë§Œ ì¶”ë ¤ core5_logë¥¼ êµ¬ì„±í–ˆë‹¤.
     * asset_id
     * date
     * t_index
     * state_value
     * degradation_rate
     * risk_group
     * intervention_flag
     * stabilized
  * ì´ë¥¼ core5_decision_log.csvë¡œ ì €ì¥í•˜ì˜€ìœ¼ë©° Core5 í†µí•© ì‹¤í—˜ ë° ìƒìœ„ ì œì–´ ë¡œì§ ì…ë ¥ìš© ë¡œê·¸ë¡œ ì‚¬ìš©ëœë‹¤.

â¸»

### ğŸ“… 12ì›” 26ì¼: Core 6 â€” Î¼HSM(State Monitor) Â· ìƒíƒœ ì¶”ì„¸ ê³„ì¸¡ Â· ê°œì… íš¨ê³¼ ê²€ì¦ Â· Core7 ì…ë ¥ ë¡œê·¸ ìƒì„±

#### 12_26_Î¼HSM_State_Monitor.ipynb

* ê³µí†µ ëª©ì 
  * ê°œì¸ ê±´ê°• ë°ì´í„°ë¥¼ ì‚¬ê±´(event) ì´ ì•„ë‹ˆë¼ ì—°ì† ìƒíƒœ(state) ë¡œ í•´ì„í–ˆë‹¤.
  * ìƒíƒœ ìˆ˜ì¤€(state_value)ê³¼ ìƒíƒœ ì¶”ì„¸(degradation_rate)ë¥¼ ë¶„ë¦¬í•´ Î¼HSM(State Monitor) ë¥¼ êµ¬ì„±í–ˆë‹¤.
  * ìœ„í—˜êµ°(risk_group)ê³¼ ìƒíƒœ ì¶”ì„¸ë¥¼ ê²°í•©í•œ rule-based ê°œì…ì´ ì‹¤ì œ ì•ˆì •í™”ë¡œ ì´ì–´ì§€ëŠ”ì§€ ê²€ì¦ í›„ Core7 ì œì–´/ë³´ìƒ ë‹¨ê³„ì— ì…ë ¥í•  ì˜ì‚¬ê²°ì • ë¡œê·¸ë¥¼ ìƒì„±í–ˆë‹¤.

* ìƒíƒœ ë°ì´í„° ë¡œë“œ ë° ì •ê·œí™”
  * health_timeseries_core_state.csvë¥¼ ë¡œë“œí•˜ê³  user_id â†’ asset_id, health_state_index â†’ state_valueë¡œ ì»¬ëŸ¼ì„ ì •ê·œí™”í–ˆë‹¤.
  * asset_id, date ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œ ë’¤ cumcount()ë¡œ ë‚ ì§œ ê¸°ë°˜ t_indexë¥¼ ìƒì„±í–ˆë‹¤.
* ìƒíƒœ ë³€í™”ëŸ‰ ë° ì¶”ì„¸(degradation_rate) ê³„ì‚°
  * assetë³„ state_value.diff()ë¡œ delta_stateë¥¼ ê³„ì‚°í•œ í›„ delta_stateì— rolling(window=7, min_periods=3) í‰ê· ì„ ì ìš©í•´ ë‹¨ê¸° ì—´í™” ì¶”ì„¸ì¸ degradation_rateë¥¼ ê³„ì‚°í–ˆë‹¤.
  * ì´ë¥¼ í†µí•´ ìˆœê°„ ë…¸ì´ì¦ˆê°€ ì•„ë‹Œ ì¶”ì„¸ ê¸°ë°˜ ìƒíƒœ ì•…í™”ë§Œì„ í¬ì°©í–ˆë‹¤.

* ì™¸ë¶€ ìœ„í—˜êµ°(risk_group) ìƒì„± ë° ë§¤í•‘
  * diabetes_dataset.csvë¥¼ ë¡œë“œí•˜ê³  Glucose, BMI, Age, BloodPressure í‰ê· ìœ¼ë¡œ risk_scoreë¥¼ ê³„ì‚°í–ˆë‹¤.
  * risk_scoreë¥¼ 3ë¶„ìœ„ë¡œ ë‚˜ëˆ  low / mid / high ìœ„í—˜êµ°ì„ ìƒì„±í–ˆìœ¼ë©° health asset ìˆ˜ë§Œí¼ ìœ„í—˜êµ°ì„ ìƒ˜í”Œë§í•´ asset_idì— ë§¤í•‘í–ˆë‹¤.
  * ì´ ë‹¨ê³„ëŠ” ì˜ë£Œ ìœ„í—˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒíƒœ ëª¨ë‹ˆí„°ì— ê²°í•©í•˜ëŠ” êµ¬ì¡° ì‹¤í—˜ì´ì—ˆë‹¤.

* 1ì°¨ ê°œì… ê·œì¹™(intervention_flag) ì •ì˜
  * ë‹¤ìŒ rule-based ì¡°ê±´ìœ¼ë¡œ ê°œì… ì—¬ë¶€ë¥¼ ì •ì˜í–ˆë‹¤.
     * high ìœ„í—˜êµ° & degradation_rate < -0.05 â†’ ê°œì…
     * mid ìœ„í—˜êµ° & degradation_rate < -0.10 â†’ ê°œì…
  * ê·¸ ì™¸ â†’ ë¹„ê°œì…
  * ì´ë¥¼ intervention_flag (0/1)ë¡œ ìƒì„±í–ˆë‹¤.

* ì•ˆì •í™”(stabilization) íŒì • ë¡œì§
  * compute_stabilization(df, window) í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ê°œì… ì‹œì  ê¸°ì¤€ window ì´í›„ì˜ post_stateë¥¼ ê³„ì‚°í–ˆë‹¤.
  * post_state - state_value > 0ì´ë©´ ì•ˆì •í™”(stabilized=True)ë¡œ íŒì •í–ˆìœ¼ë©° ê¸°ë³¸ window=7 ê¸°ì¤€ìœ¼ë¡œ ì•ˆì •í™” ë¹„ìœ¨ì„ ê³„ì‚°í–ˆë‹¤.

* ê°œì… ê°•ë„ ì¬ì •ì˜ ì‹¤í—˜
  * ê°œì…ì„ ì´ì§„ í”Œë˜ê·¸ê°€ ì•„ë‹Œ ê°•ë„ë¡œ ì¬ì •ì˜í–ˆë‹¤.
     * high & degradation_rate < -0.1 â†’ "strong"
     * high or mid & degradation_rate < -0.05 â†’ "weak"
  * ê·¸ ì™¸ â†’ "none"
  * ê°œì… ê°•ë„ë³„ ì•ˆì •í™” ë¹„ìœ¨ì„ ë¹„êµí–ˆë‹¤.

* ì‹œê°„ ì§€ì—°(window) íš¨ê³¼ ë¶„ì„
  * windowë¥¼ [3, 7, 14]ë¡œ ë³€ê²½í•˜ë©° ì•ˆì •í™” ë¹„ìœ¨ì„ ë¹„êµí•˜ê³  ê°œì… íš¨ê³¼ê°€ ì¦‰ì‹œ ë°˜ì‘ì´ ì•„ë‹Œ ì‹œê°„ ëˆ„ì  íš¨ê³¼ì„ì„ í™•ì¸í–ˆë‹¤.

* ê°œì… íš¨ìœ¨(Efficiency) ì§€í‘œ ê³„ì‚°
  * intervention_flag ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒì„ ì§‘ê³„í–ˆë‹¤.
     * stabilize_rate = ì•ˆì •í™” ë¹„ìœ¨
     * count = ìƒ˜í”Œ ìˆ˜
  * efficiency = stabilize_rate / countë¡œ ê°œì… íš¨ìœ¨ ì§€í‘œë¥¼ ê³„ì‚° í›„ ê°œì… ë¹ˆë„ì™€ íš¨ìœ¨ì´ í•­ìƒ ë¹„ë¡€í•˜ì§€ ì•ŠìŒì„ í™•ì¸í–ˆë‹¤.

* False Intervention ë¶„ì„
  * intervention_flag == 1 ì´ë©´ì„œ stabilized == False ì¸ ì‚¬ë¡€ë¥¼ ì¶”ì¶œí–ˆìœ¼ë©° í•´ë‹¹ ìƒ˜í”Œì˜ risk_group, degradation_rate ë¶„í¬ í†µê³„ë¥¼ í™•ì¸í–ˆë‹¤.
  * ê°œì… ì‹¤íŒ¨ ì˜ì—­ì„ ëª…ì‹œì ìœ¼ë¡œ ë¶„ë¦¬í–ˆë‹¤.

* Core7 ì…ë ¥ ë¡œê·¸ ìƒì„±
  * ë‹¤ìŒ ì»¬ëŸ¼ë§Œ ë‚¨ê¸´ core5_logë¥¼ ìƒì„±í–ˆë‹¤.
     * asset_id
     * date
     * t_index
     * state_value
     * degradation_rate
     * risk_group
     * intervention_flag
     * stabilized
  * ../data_csv/core5_decision_log.csvë¡œ ì €ì¥í–ˆë‹¤.
  * ì´ ë¡œê·¸ë¥¼ Core7 ì œì–´Â·ë³´ìƒÂ·ì •ì±… ë‹¨ê³„ì˜ ì…ë ¥ ë°ì´í„°ë¡œ ì‚¬ìš©í•˜ë„ë¡ í™•ì •í–ˆë‹¤.
